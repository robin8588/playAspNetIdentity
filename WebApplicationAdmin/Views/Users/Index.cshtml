
@{
    ViewBag.Title = "用户";
}

<div id="grid"></div>

@section scripts{
<script>
    $(function () {
        var crudServiceBaseUrl = "@Url.Content("~/Users")";
        var columns = JSON.parse('@Html.Raw(ViewBag.columns)');
        columns.push({ command: ["edit", "destroy"], title: "&nbsp;", width: "100" })
        var models = @Html.Raw(ViewBag.models);
        $("#grid").kendoGrid({
            dataSource: {
                serverFiltering: true,
                serverPaging: true,
                serverSorting: true,
                transport: {
                    read: {
                        url: crudServiceBaseUrl + "/Read",
                        type:"post"
                    },
                    update: {
                        url: crudServiceBaseUrl + "/Update",
                        type:"post"
                    },
                    destroy: {
                        url: crudServiceBaseUrl + "/Destroy",
                        type: "post"
                    },
                    create: {
                        url: crudServiceBaseUrl + "/Create",
                        type:"post"
                    }
                },
                schema: {
                    total: "total",
                    data: "data",
                    model: models
                },
                error: function (e) {
                    console.log(e.xhr.responseText);
                    return;
                }
            },
            pageable: {
                pageSize: 10,
                refresh: true
            },
            sortable: true,
            filterable: {
                extra: false
            },
            editable: "popup",
            toolbar: ["create"],
            columns: columns
        });
    });
</script>
    }